<%@page import="java.io.File"%>
<%@page import="org.apache.commons.fileupload.disk.DiskFileItemFactory"%>
<%@page import="board.model.ImageBoard"%>
<%@page import="board.model.ImageBoardDAO"%>
<%@ page contentType="text/html;charset=utf-8"%>
<%@ page import="db.DBManager"%>
<%@ page import="java.sql.Connection"%>
<%@ page import="java.sql.PreparedStatement"%>
<%@ page import="java.sql.ResultSet"%>

<%@ include file="/inc/lib.jsp" %>
<%! 
String saveDir="C:/workspace/javaEE_workspace/BoardApp/WebContent/data";	
int maxSize=3*1024*1024; //3M byte
ImageBoardDAO dao = new ImageBoardDAO();
%>
<%
	DiskFileItemFactory itemFactory=new DiskFileItemFactory();
	itemFactory.setRepository(new File(saveDir));
	itemFactory.setSizeThreshold(maxSize);
	itemFactory.setDefaultCharset("utf-8");
	ImageBoardDAO boardDAO = new ImageBoardDAO();
	int board_id = Integer.parseInt(request.getParameter("board_id"));
	
	String author = request.getParameter("author"); //작성자
	String title = request.getParameter("title");//제목
	String content = request.getParameter("content");//내용



	ImageBoard board = new ImageBoard();
	board.setAuthor(author);
	board.setTitle(title);
	board.setContent(content);
	board.setBoard_id(board_id);
	//등록
	int result = boardDAO.update(board); //vo,dto 
	if(result == 0){
		out.print(getMsgBack("실패"));

		}else{
		out.print(getMsgURL("성공","/imageboard/list.jsp"));
		}
	
%>

<%



	//select 
/*	String sql="update notice set title = ?,author = ?,content= ? where notice_id = ?";
	pstmt=con.prepareStatement(sql); //쿼리준비
	pstmt.setString(1,title);
	pstmt.setString(2,author);
	pstmt.setString(3,content);
	pstmt.setInt(4,notice_id);

		int result = pstmt.executeUpdate();
		if(result==0){
		
		out.print(getMsgBack("실패"));

		}else{
		out.print(getMsgURL("성공","/board/list.jsp"));
		}
	
	db에 연동에 사용된 모든 객체 닫기 
	if(pstmt!=null){
		pstmt.close();
	}
	if(con!=null){
		con.close();
	}
	*/


	%>
	